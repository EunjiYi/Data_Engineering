### Assignments



### 1. 가상의 데이터 인프라 구축해보기 (No Coding)

○ raw_data: 어떤 데이터들이 복사될 수 있는지?

○ analytics: 어떤 써머리 테이블들을 만들 수 있을지?



**데이터베이스 품질본부 - 이슈 대응 현황을 리스트업하자.**

#### raw_data:

- 어떤 데이터들이 복사될 수 있을까?

  > 발생이슈내역 / 이슈발생날짜 / 이슈발생한 고객사명 / 이슈발생한 고객사 분류(산업) / 이슈해결한 개발자명 / 이슈해결하고 생긴 패치명 / 이슈해결한 날짜(소스커밋날짜) / 이슈재발방지방법 / 고객에게 제공한 이슈가 발생한 바이너리 생성(빌드)일자, 빌드 리비전, 배포일자, 빌드담당자명, 테스트담당자명, 배포담당자명 / 이슈가 해결되어 패치된 바이너리의 생성(빌드)일자, 빌드 리비전, 배포일자, 빌드담당자명, 테스트담당자명, 배포담당자명



#### analytics:

- 어떤 써머리 테이블들이 만들어질 수 있을까?
1. 패치노트: 패치에 관한 기록을 저장한다.

> 패치명 / 패치생성일자 / 어떤 이슈를 해결하기위한 패치였는지 - 이슈카테고리 /  패치 테스트를 위한 sql 시나리오 / 패치생성한 개발자명 / 패치생성시 커밋 리비전



1. 이슈 히스토리: 이슈에 관한 기록을 저장한다.

  > 1차 이슈생성일자 / 1차 이슈 카테고리 / 1차 이슈 내역 / 1차 이슈해결을 위한 패치명
  > 2차 이슈생성일자 / 2차 이슈 카테고리 / 2차 이슈 내역 / 2차 이슈해결을 위한 패치명
  > ...
  > (재발 시 동일한 형태로 아래에 레코드 생성)



1. 개발 히스토리: 해당 서비스의 개발 기록을 저장한다.

  > 1차 이슈내역 / 1차 이슈 해결날짜 / 1차 이슈 해결한 개발자명 / 1차 이슈 해결 내역(소스코드 수정 등)
  > 2차 이슈내역 / 2차 이슈 해결날짜 / 2차 이슈 해결한 개발자명 / 2차 이슈 해결 내역(소스코드 수정 등)
  > ...
  > (재발 시 동일한 형태로 아래에 레코드 생성)



﻿

### 2. ﻿Monthly Active User 세보기

```sql
SELECT TO_CHAR(ts, 'YYYY-MM') AS time, count(userid) FROM raw_data.user_session_channel A, raw_data.session_timestamp B WHERE A.sessionid = B.sessionid group by time
```



#### 결과

> ('2019-05', 6261)
> ('2019-06', 10520)
> ('2019-07', 14840)
> ('2019-09', 15790)
> ('2019-10', 18899)
> ('2019-08', 17151)
> ('2019-11', 18059)





`+` 첨삭

```sql
SELECT TO_CHAR(ts, 'YYYY-MM') AS time, count(DISTINCT userid)
FROM raw_data.user_session_channel A
JOIN raw_data.session_timestamp B ON A.sessionid = B.sessionid
GROUP BY 1
ORDER BY 2 DESC
```

